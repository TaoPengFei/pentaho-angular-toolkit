env:
  global:
  - GH_REPO: pentaho-angular-toolkit
  - secure: "RJXFlFfoTDJIu5OGmffhALI6d7MPasurudBYW29+wkqDbzVcL5my4M6p/vZkMXkzFYZUj8WyQHKHgQJKyTFU/vtAuqpuNGJpLUssf8i17/UWvA4MXEfU5X2xRNqmrmCAkax5ZwJrKgMZYClhgp4lYz1/J7+EbN8dE0vHyagY95pw7Ua5gq3BTac9PP9UNQXg9415/vDPP3+mcrUGHLpuHO1sOadTdNrjnDsdnCVm2O9e2eFy1m+zcLGuoi3ekQD4umAROHEXkm7FEyO50MGblNt2uxAbz5/zqwg3dBeXrVVz12tU2xdnuV5VAnA7TuXompRYwmO//O4vSRmQ3C87LIPFAm5J5UUacK8wZdOLYQVwghKwCIWQ7lNyNY/z2/XIvUmqXTX/Jl/bGCz1CfxgJgSdyTZcxTSCIVGWXtw8LU3EHjlxqsWFjKnnSL3wgEAzwGUEt867y91qoXwhmgN6523DwlXM5B5C3SHx9EIGn8wkrR57FTam3TjF4MFwx4FQFTNTcnLRnBHec/Tl8J94pt9fT6Za+LcoI155pBjZU0XmWu0q8zIY+rlJb9k7Pnv/XF07K/cIANLinHKoqb6ytheH6x3wK5V/RzEY4pTjCYokUq4944wcJZ2Hx1lDaO5CKhR72+QwKn3vg0J/Z1Ot9o++kTdjUebANh5q7lem17s="

language: node_js
node_js:
- '0.10'

before_install:
- npm install -g npm@2

install:
- npm install -g gulp
- npm install -g jsdoc
- npm install

script:
- gulp

before_deploy:
- gulp release --version $TRAVIS_TAG
- cp -r module_dist $GH_REPO
- zip -r $GH_REPO-$TRAVIS_TAG.zip $GH_REPO -x *.git*

deploy:
  provider: releases
  api_key: $GH_TOKEN
  file: $GH_REPO-$TRAVIS_TAG.zip
  on:
    tags: true
    repo: $TRAVIS_REPO_SLUG

after_deploy:
- bash _scripts/deploy-module.sh
- bash _scripts/deploy-doc.sh


